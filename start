#! /bin/bash

set -euo pipefail

if echo '\l' | psql -U postgres lulc; then
    echo "ok - postgres lulc database exists"
else
    echo "
        CREATE DATABASE lulc;
    " | psql -U postgres
fi

# API Bootstrapping
npm --prefix ./services/api/ install
npm --prefix ./services/api/ run doc

# GPU Bootstrapping
npm --prefix ./services/api/ install

npm --prefix ./services/api/ run dev &
npm --prefix ./services/gpu/ run dev &

wait
